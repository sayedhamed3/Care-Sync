<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointments</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/appointments.css">
</head>
<body>
    <%- include('../partials/_navbar.ejs') %>
    <div id="main-container">
        <div class="appointment-header">
            <h1>Dr. <%= doctor.name %> Appointments</h1>
            <a id="add-appointment-button" href="/appointments/new">New Appointment</a>
        </div>
    

        <div id="all-appointments">
            <% appointments.forEach((appointment) => { %>
                <!-- <a href="/appointments/<%= appointment._id %>">
                    <li>
                        <%= appointment.patient.name %> at <%= appointment.date %> 
                    </li>
                </a> -->
                <div class="appointment-card">
                    <a href="/appointments/<%= appointment._id %>" class="card-main">
                        <div class="card-main">
                            <div class="top-card">
                                <h2 id="appointment-name"><%= appointment.patient.name %></h2>
                                <h3 id="status-text" style="background: <%= appointment.status === 'Scheduled' ? 'green' : appointment.status === 'Completed' ? 'blue' : 'red' %>;" ><%= appointment.status %></h3>

                            </div>
                            <h3 id="date-text">
                                <%= new Date(appointment.date).toLocaleString('en-US', { dateStyle: 'short', timeStyle: 'short' }) %>
                            </h3>
                            
                            <p><%= appointment.notes %></p>
                        </div>
                    </a>
                    
                    <div class="card-end">
                        View Details
                    </div>
                </div>
            <% }) %>
        </div>
    </div>
</body>
</html>